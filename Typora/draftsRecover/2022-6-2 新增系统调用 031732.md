# 新增系统调用

## 系统调用实例

1. 编写程序获取进程号。

   <img src="/home/kieren/.config/Typora/typora-user-images/image-20220602031158286.png" alt="image-20220602031158286"  />

2. 修改Makefile重新生成xv6，运行程序。![image-20220602031356661](/home/kieren/.config/Typora/typora-user-images/image-20220602031356661.png)

   ## 添加系统调用

   1. 增加系统调用号
   2. 修改user.h
   3. usys.S中定义用户态入口
   4. 修改syscall.c的跳转表
   5. 实现sys_getcpuid()函数
   6. 实现getcpuid()函数
   7. 修改defs.h